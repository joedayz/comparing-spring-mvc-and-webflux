# Configuración de la aplicación
spring.application.name=demo-webflux-mongodb
server.port=8080

# Configuración de MongoDB
spring.data.mongodb.host=localhost
spring.data.mongodb.port=27017
spring.data.mongodb.database=expenses_demo
spring.data.mongodb.username=admin
spring.data.mongodb.password=password123
spring.data.mongodb.authentication-database=admin

# Permitir sobreescritura de beans para evitar conflictos entre WebFlux y Spring Web
spring.main.allow-bean-definition-overriding=true

# Configuración para manejar la coexistencia de WebFlux y Spring Web
spring.main.web-application-type=reactive

# Configuración de rutas (comentada para evitar conflictos)
# spring.webflux.base-path=/api/v1/reactive
# spring.mvc.servlet.path=/api/v1/traditional

# Configuración de logging para ver las diferencias
logging.level.pe.joedayz.demo_webflux_mongodb=DEBUG
logging.level.org.springframework.web.reactive=DEBUG
logging.level.org.springframework.web.servlet=DEBUG

# Configuración de actuator para monitoreo
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always

# Configuración de métricas (Spring Boot 3.x)
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true
management.metrics.enable.mongodb=true

# Tags personalizados para métricas
management.metrics.tags.application=demo-webflux-mongodb
management.metrics.tags.version=1.0.0
management.metrics.tags.environment=demo

# Configuración de pool de conexiones para comparación
spring.data.mongodb.max-connection-pool-size=100
spring.data.mongodb.min-connection-pool-size=5
spring.data.mongodb.max-connection-idle-time=30000
spring.data.mongodb.max-connection-life-time=300000
